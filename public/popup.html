<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>自动收藏设置</title>
    <style>
      body {
        width: 350px;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 16px;
        color: #333;
      }
      h2 {
        margin-top: 0;
        color: #4285f4;
        font-size: 18px;
        margin-bottom: 16px;
      }
      .form-group {
        margin-bottom: 16px;
      }
      .form-label {
        display: block;
        margin-bottom: 5px;
        font-size: 14px;
        font-weight: 500;
      }
      .form-control {
        width: 100%;
        padding: 8px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
      }
      .form-hint {
        color: #666;
        font-size: 12px;
        margin-top: 4px;
      }
      select.form-control {
        height: 34px;
      }
      .radio-group {
        display: flex;
        gap: 15px;
      }
      .radio-option {
        display: flex;
        align-items: center;
        cursor: pointer;
      }
      .radio-option input {
        margin-right: 5px;
      }
      .btn-primary {
        background-color: #4285f4;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        padding: 10px;
        width: 100%;
      }
      /* 禁用状态的按钮样式 */
      .btn-primary:disabled {
        background-color: #92b7f8;
        cursor: not-allowed;
      }
      /* 加载动画样式 */
      .loading-spinner {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spinner 0.8s linear infinite;
        margin-right: 8px;
        vertical-align: middle;
      }
      @keyframes spinner {
        to {transform: rotate(360deg);}
      }
      .model-list {
        max-height: 200px;
        overflow-y: auto;
        margin-top: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        display: none;
      }
      .model-item {
        padding: 8px 12px;
        border-bottom: 1px solid #eee;
        cursor: pointer;
      }
      .model-item:hover {
        background-color: #f5f5f5;
      }
      .model-item:last-child {
        border-bottom: none;
      }
      .model-name {
        font-size: 13px;
        font-weight: 500;
        margin-bottom: 2px;
      }
      .model-id {
        font-size: 11px;
        color: #666;
      }
      .model-loading {
        padding: 8px 12px;
        font-style: italic;
        color: #666;
        font-size: 13px;
      }
      .model-search {
        margin-top: 8px;
        position: relative;
      }
      .search-icon {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        color: #666;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h2>AI 书签助手设置</h2>
    
    <div class="form-group">
      <label class="form-label">API 地址</label>
      <input id="chatUrl" type="text" class="form-control" placeholder="例如: https://api.openai.com/v1/chat/completions">
    </div>
    
    <div class="form-group">
      <label class="form-label">API 密钥</label>
      <input id="apiKey" type="password" class="form-control" placeholder="输入您的API密钥">
    </div>
    
    <div class="form-group">
      <label class="form-label">AI 模型</label>
      <input id="modelInput" type="text" class="form-control" placeholder="输入模型名称">
      <div class="form-hint">输入模型名称，或点击搜索按钮获取可用模型</div>
      <div class="model-search">
        <input id="modelSearch" type="text" class="form-control" placeholder="搜索模型...">
        <span id="searchModelBtn" class="search-icon">🔍</span>
      </div>
      <div id="modelList" class="model-list"></div>
    </div>
    
    <div class="form-group">
      <label class="form-label">通知方式</label>
      <div class="radio-group">
        <label class="radio-option">
          <input type="radio" name="notificationType" value="system" id="systemNotification">
          系统通知
        </label>
        <label class="radio-option">
          <input type="radio" name="notificationType" value="browser" id="browserNotification">
          浏览器内通知
        </label>
      </div>
    </div>
    
    <div class="form-group">
      <label class="form-label">AI 标题生成</label>
      <div class="radio-group">
        <label class="radio-option">
          <input type="checkbox" id="enableTitleGen" checked>
          启用智能标题生成
        </label>
      </div>
      <div class="form-hint">开启后，AI 将自动生成"品牌 - 功能"格式的标题</div>
    </div>
    
    <div class="form-group">
      <label class="form-label">AI 新路径生成</label>
      <div class="radio-group">
        <label class="radio-option">
          <input type="checkbox" id="enableNewPath">
          允许生成新的文件夹路径（调试中，可能不会按照预期工作）
        </label>
      </div>
      <div class="form-hint">关闭时，AI 只会在已有书签路径中进行分类</div>
    </div>
    
    <div class="form-group" id="newPathRootGroup" style="display:none;">
      <label class="form-label">新路径创建位置</label>
      <select id="newPathRootSelect" class="form-control">
        <option value="1">书签栏</option>
        <option value="2">其他书签</option>
      </select>
      <div class="form-hint">选择新路径应创建在哪个根文件夹下</div>
    </div>
    
    <div class="form-group">
      <button id="bookmarkButton" class="btn-primary">收藏当前标签页</button>
    </div>
    
    <script src="../dist/popup.js" type="module"></script>
  </body>
</html> 